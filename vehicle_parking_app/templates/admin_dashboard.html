<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Admin Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}" />
</head>
<body>
    <h1>Admin Dashboard</h1>

    <a href="{{ url_for('create_lot') }}">+ Create New Parking Lot</a> |
    <a href="{{ url_for('view_users') }}">View All Users</a> |
    <a href="{{ url_for('logout') }}">Logout</a>

    <table class="data-table">
        <thead>
            <tr>
                <th>Lot ID</th>
                <th>Name</th>
                <th>Address</th>
                <th>Pin Code</th>
                <th>Price per Hour</th>
                <th>Max Spots</th>
                <th>Available Spots</th>
                <th>Occupied Spots</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for lot in lots %}
            <tr>
                <td>{{ lot['id'] }}</td>
                <td>{{ lot['name'] }}</td>
                <td>{{ lot['address'] }}</td>
                <td>{{ lot['pin_code'] }}</td>
                <td>{{ lot['price_per_hour'] }}</td>
                <td>{{ lot['max_spots'] }}</td>
                <td>{{ spot_counts[lot['id']].get('A', 0) }}</td>
                <td>{{ spot_counts[lot['id']].get('O', 0) }}</td>
                <td>
                    <a href="{{ url_for('edit_lot', lot_id=lot['id']) }}">Edit</a> |
                    <a href="{{ url_for('delete_lot', lot_id=lot['id']) }}" onclick="return confirm('Are you sure you want to delete this lot?')">Delete</a>
                </td>
            </tr>
            {% else %}
            <tr><td colspan="9">No parking lots found.</td></tr>
            {% endfor %}
        </tbody>
    </table>
</body>
</html>
